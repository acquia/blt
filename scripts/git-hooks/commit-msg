#!/usr/bin/env bash
#
# To enable this hook, developers should place it in .git/hooks/.
#
# You may adapt the message length check. Currently checking it's longer than
# 15 characters.


ROOT_DIR="$(pwd)/"
PREFIX=$($ROOT_DIR/vendor/bin/drupal yaml:get:value $ROOT_DIR/project.yml project.prefix)
REGEX=$($ROOT_DIR/vendor/bin/drupal yaml:get:value $ROOT_DIR/project.yml git.commit_message.regex)
MESSAGE=$($ROOT_DIR/vendor/bin/drupal yaml:get:value $ROOT_DIR/project.yml git.commit_message.instructions)
if ! grep -iqE "$REGEX" "$1"; then
  echo -e "$MESSAGE";
  exit 1;
fi
